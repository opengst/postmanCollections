{
  "variables": [],
  "info": {
    "name": "Requests API (used by Jenkins) - Demandeur - Public",
    "_postman_id": "7a39d20f-1740-a722-d432-34f00bdad326",
    "description": "This collection contains requests used by Jenkins to test our API",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "_postman_id": "d28880e2-8ca8-07b9-3de5-4ef69e6720fc",
      "name": "https://gst.atreal.fr/api/v1/ping",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "tests[\"Response is OK\"] = responseBody === 'OK';"
            ]
          }
        }
      ],
      "request": {
        "url": "https://gst.atreal.fr/api/v1/ping",
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "*/*",
            "description": ""
          },
          {
            "key": "X-Requested-With",
            "value": "XMLHttpRequest",
            "description": ""
          },
          {
            "key": "User-Agent",
            "value": "Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36",
            "description": ""
          },
          {
            "key": "Authorization",
            "value": "Token token=7695535153c9e8acb19c1830ce8736fa",
            "description": ""
          },
          {
            "key": "Accept-Encoding",
            "value": "gzip, deflate, sdch, br",
            "description": ""
          },
          {
            "key": "Accept-Language",
            "value": "fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4",
            "description": ""
          },
          {
            "key": "Cookie",
            "value": "session0|session_id=%22%22; connect.sid=s%3A9e984315-4d55-496c-a7cf-06bfe711df3a.OD85HPOJ8clIOZxagfEX%2Fps7Pi%2BuSliu%2FU0SAFI1wmw; sessionid=52314e2d3754f719c3710fe8750a7c6d8b8acbd9",
            "description": ""
          }
        ],
        "body": {},
        "description": "test if resaframe in prod is up"
      },
      "response": []
    },
    {
      "_postman_id": "fda101d1-46be-c194-3e59-b470b5dc9fb0",
      "name": "http://gmao.ville-lannion.fr/api/v1/lannion/open_object/partners?",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "tests[\"Lannion resaframe ASSO select seems fine\"] = responseCode.code === 200;"
            ]
          }
        }
      ],
      "request": {
        "url": "http://gmao.ville-lannion.fr/api/v1/lannion/open_object/partners?fields%5B%5D=id&fields%5B%5D=name&filters%5B0%5D%5Bfield%5D=name&filters%5B0%5D%5Boperator%5D=ilike&filters%5B0%5D%5Bvalue%5D=&filters%5B1%5D%5Bfield%5D=type_id.code&filters%5B1%5D%5Boperator%5D=ilike&filters%5B1%5D%5Bvalue%5D=ASSO",
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "*/*",
            "description": ""
          },
          {
            "key": "X-Requested-With",
            "value": "XMLHttpRequest",
            "description": ""
          },
          {
            "key": "User-Agent",
            "value": "Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36",
            "description": ""
          },
          {
            "key": "Authorization",
            "value": "Token token=7695535153c9e8acb19c1830ce8736fa",
            "description": ""
          },
          {
            "key": "Referer",
            "value": "https://gst.atreal.fr/saint-barthelemy-anjou/resaframe/index.html",
            "description": ""
          },
          {
            "key": "Accept-Encoding",
            "value": "gzip, deflate, sdch, br",
            "description": ""
          },
          {
            "key": "Accept-Language",
            "value": "fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4",
            "description": ""
          },
          {
            "key": "Cookie",
            "value": "session0|session_id=%22%22; connect.sid=s%3A9e984315-4d55-496c-a7cf-06bfe711df3a.OD85HPOJ8clIOZxagfEX%2Fps7Pi%2BuSliu%2FU0SAFI1wmw; sessionid=52314e2d3754f719c3710fe8750a7c6d8b8acbd9",
            "description": ""
          }
        ],
        "body": {},
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "a07762c4-0958-5203-d88c-06b93802bb2c",
      "name": "https://gst.atreal.fr/api/v1/lamontagne/open_object/partners?",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "tests[\"La Montagne resaframe ASSO select seems fine\"] = responseCode.code === 200;"
            ]
          }
        }
      ],
      "request": {
        "url": "https://gst.atreal.fr/api/v1/lamontagne/open_object/partners?fields%5B%5D=id&fields%5B%5D=name&filters%5B0%5D%5Bfield%5D=name&filters%5B0%5D%5Boperator%5D=ilike&filters%5B0%5D%5Bvalue%5D=&filters%5B1%5D%5Bfield%5D=type_id.name&filters%5B1%5D%5Boperator%5D=ilike&filters%5B1%5D%5Bvalue%5D=asso",
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "*/*",
            "description": ""
          },
          {
            "key": "X-Requested-With",
            "value": "XMLHttpRequest",
            "description": ""
          },
          {
            "key": "User-Agent",
            "value": "Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36",
            "description": ""
          },
          {
            "key": "Authorization",
            "value": "Token token=7695535153c9e8acb19c1830ce8736fa",
            "description": ""
          },
          {
            "key": "Referer",
            "value": "https://gst.atreal.fr/saint-barthelemy-anjou/resaframe/index.html",
            "description": ""
          },
          {
            "key": "Accept-Encoding",
            "value": "gzip, deflate, sdch, br",
            "description": ""
          },
          {
            "key": "Accept-Language",
            "value": "fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4",
            "description": ""
          },
          {
            "key": "Cookie",
            "value": "session0|session_id=%22%22; connect.sid=s%3A9e984315-4d55-496c-a7cf-06bfe711df3a.OD85HPOJ8clIOZxagfEX%2Fps7Pi%2BuSliu%2FU0SAFI1wmw; sessionid=52314e2d3754f719c3710fe8750a7c6d8b8acbd9",
            "description": ""
          }
        ],
        "body": {},
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "f95f0dd3-19e5-b2b2-75df-a457d6c4dc2f",
      "name": "authenticate",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "tests[\"Response time is less than 500ms\"] = responseTime < 500;",
              "var jsonData = JSON.parse(responseBody);",
              "postman.setEnvironmentVariable(\"sessionId\", jsonData.result.session_id);",
              "postman.setEnvironmentVariable(\"uid\", jsonData.result.uid);",
              "tests[\"Authenticate Bdd\"] = jsonData.result.db === 'test_api';",
              "",
              "if (jsonData.result.db === 'test_api'){",
              "    if(jsonData.result.login === \"admin\")",
              "        tests[\"Authenticate as admin\"] = jsonData.result.uid === 1;",
              "    ",
              "    if(jsonData.result.login === \"cdupont\")",
              "        tests[\"Authenticate as demandeur externe\"] = jsonData.result.uid === 88;",
              "    ",
              "    if(jsonData.result.login === \"dst\")",
              "        tests[\"Authenticate as gestionnaire\"] = jsonData.result.uid === 104;",
              "}",
              "",
              "//Check if the content type is json",
              "var contentTypeHeader = responseHeaders.hasOwnProperty(\"Content-Type\")",
              "if (contentTypeHeader) {",
              "    tests[\"Content-Type is application/json\"] = ",
              "      responseHeaders[\"Content-Type\"].has(\"application/json\");",
              "}",
              ""
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/session/authenticate",
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          },
          {
            "key": "Accept",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"id\": \"r1\",\r\n  \"jsonrpc\": \"2.0\",\r\n  \"method\": \"call\",\r\n  \"params\": {\r\n    \"login\": \"{{login}}\",\r\n    \"password\": \"{{password}}\",\r\n    \"db\": \"{{db}}\"\r\n  }\r\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "d04f2c0e-426b-0b3b-8d9a-ab588f9c5b07",
      "name": "get 'res.users' Test",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "tests[\"get id\"] = jsonData.id === 'r2';",
              "tests[\"get action id\"] = jsonData.result[0].action_id[0] ===106;",
              "",
              "//Tests below allow you to test user's bdd ",
              "if(jsonData.result[0].isManager ===true)",
              "    tests[\"get Users Bdd as Admin\"] = jsonData.result[0].user_id[1]==='Administrator';",
              "else if(jsonData.result[0].is_bookable_manager ===true)",
              "    tests[\"get Users Bdd as Gestionnaire\"] = jsonData.result[0].user_id[1]==='dst 02'; //Gestionnaire",
              "else",
              "    tests[\"get Users Bdd as Demandeur externe\"] = jsonData.result[0].user_id[1]==='DUPONT Chantal';//Demandeur externe",
              "",
              "",
              "",
              "//Get current Group for user",
              "if(jsonData.result[0].is_bookable_manager ===true){",
              "    tests[\"get current Group\"] = jsonData.result[0].current_group[1] ==='Gestionnaire des demandes';",
              "}",
              "else{",
              "    tests[\"get current Group\"] = jsonData.result[0].current_group[1] ==='Demandeur';",
              "}",
              "",
              "if(jsonData.result[0].user_id[1]==='Administrator'){",
              "    tests[\"get achat Group\"] = jsonData.result[0].achat_group[1] ==='Demandeur';",
              "}else{",
              "    tests[\"get achat Group\"] = jsonData.result[0].achat_group === false;",
              "}",
              "",
              "if((jsonData.result[0].isManager === false)&& (jsonData.result[0].is_bookable_manager ===true))",
              "{",
              "    tests[\"get openresa Group\"] = jsonData.result[0].openresa_group[1] === 'Gestionnaire';",
              "}",
              "",
              "if(jsonData.result[0].isManager === true){",
              "tests[\"get patrimoine Group\"] = jsonData.result[0].patrimoine_group[1] === 'Superviseur';",
              "tests[\"get user_id\"] = jsonData.result[0].user_id[1] === 'Administrator';",
              "    ",
              "}",
              "",
              "// When the person's right is Adminitrator return true, otherwise it will return false",
              "if(jsonData.result[0].user_id[1]==='Administrator'){",
              "    tests[\"Check Manager right\"] = jsonData.result[0].isManager ===true;    ",
              "}else{",
              "    tests[\"Check Manager right\"] = jsonData.result[0].isManager ===false;",
              "}",
              "",
              "// When the person's right is Adminitrator or  Gestionnaire return true, otherwise it will return false",
              "if(jsonData.result[0].user_id[1]==='Administrator'||jsonData.result[0].user_id[1]==='dst 02'){",
              "    tests[\"Check Bookable_Manager\"]= jsonData.result[0].is_bookable_manager ===true;",
              "    ",
              "}",
              "else{",
              "    tests[\"Check Bookable_Manager\"]= jsonData.result[0].is_bookable_manager ===false;",
              "}",
              "",
              "// When the person's right is Adminitrator or  Gestionnaire return true, otherwise it will return false",
              "if(jsonData.result[0].user_id[1]==='Administrator'||jsonData.result[0].user_id[1]==='dst 02'){",
              "    tests[\"Check ResaManager\"] = jsonData.result[0].isResaManager=== true;",
              "}",
              "else{",
              "    tests[\"Check ResaManager\"] = jsonData.result[0].isResaManager=== false;",
              "}"
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/get",
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          },
          {
            "key": "Accept",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"id\": \"r2\",\r\n  \"jsonrpc\": \"2.0\",\r\n  \"method\": \"call\",\r\n  \"params\": {\r\n    \"model\": \"res.users\",\r\n    \"ids\": [{{uid}}],\r\n    \"session_id\": \"{{sessionId}}\"\r\n  }\r\n}"
        },
        "description": "pour connaitre des infos à renseigner dans la demande"
      },
      "response": []
    },
    {
      "_postman_id": "79e00113-bf28-5a12-a08b-cb8f969ded5e",
      "name": "get Organisations 'Particuliers Commune' id copy",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "postman.setEnvironmentVariable(\"resPartner.id\", jsonData.result.ids[0]);",
              "tests[\"Find one 'Particuliers Commune'\"] = jsonData.result.length === 1;"
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/search_read",
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          },
          {
            "key": "Accept",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"id\": \"r2\",\r\n  \"jsonrpc\": \"2.0\",\r\n  \"method\": \"call\",\r\n  \"params\": {\r\n    \"sort\": \"name ASC\",\r\n    \"limit\": 20,\r\n    \"offset\": 0,\r\n    \"model\": \"res.partner\",\r\n    \"fields\": [\r\n      \"id\"\r\n    ],\r\n    \"domain\": [\r\n      [\r\n        \"name\",\r\n        \"ilike\",\r\n        \"Particuliers Commune\"\r\n      ],\r\n      [\r\n        \"subname\",\r\n        \"ilike\",\r\n        \"Particuliers Commune\"\r\n      ]\r\n    ],\r\n    \"session_id\": \"{{sessionId}}\",\r\n    \"context\": {\r\n      \"__ref\": \"compound_context\",\r\n      \"__contexts\": [\r\n        {\r\n          \"lang\": \"fr_FR\",\r\n          \"tz\": \"Europe/Paris\",\r\n          \"uid\": {{uid}}\r\n        },\r\n        {\r\n          \"bin_size\": true\r\n        }\r\n      ],\r\n      \"__eval_context\": null\r\n    }\r\n  }\r\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "672d98f5-942b-9c12-976e-495c76b90635",
      "name": "get Roles 'Demandeur externe' id copy",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "postman.setEnvironmentVariable(\"resGroups.DemandeurExterne.id\", jsonData.result.ids[0]);",
              "tests[\"Find one 'Demandeur externe'\"] = jsonData.result.length === 1;"
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/search_read",
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          },
          {
            "key": "Accept",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"id\": \"r3\",\r\n  \"jsonrpc\": \"2.0\",\r\n  \"method\": \"call\",\r\n  \"params\": {\r\n    \"sort\": \"name ASC\",\r\n    \"limit\": 0,\r\n    \"offset\": 0,\r\n    \"fields\": [\r\n      \"id\"\r\n    ],\r\n    \"model\": \"res.groups\",\r\n    \"domain\": [\r\n      [\r\n        \"name\",\r\n        \"ilike\",\r\n        \"Demandeur externe\"\r\n      ],\r\n      [\r\n        \"full_name\",\r\n        \"ilike\",\r\n        \"Demandeur externe\"\r\n      ]\r\n    ],\r\n    \"session_id\": \"{{sessionId}}\",\r\n    \"context\": {\r\n      \"__ref\": \"compound_context\",\r\n      \"__contexts\": [\r\n        {\r\n          \"lang\": \"fr_FR\",\r\n          \"tz\": \"Europe/Paris\",\r\n          \"uid\": {{uid}}\r\n        },\r\n        {\r\n          \"bin_size\": true\r\n        }\r\n      ],\r\n      \"__eval_context\": null\r\n    }\r\n  }\r\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "afa5c1b2-8423-1ce9-a92b-22e6fc3cb415",
      "name": "get Roles 'Demandeur' id copy",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "postman.setEnvironmentVariable(\"resGroups.Demandeur.id\", jsonData.result.ids[0]);",
              "tests[\"Find one 'Demandeur'\"] = jsonData.result.length === 1;"
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/search_read",
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          },
          {
            "key": "Accept",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"id\": \"r3\",\r\n  \"jsonrpc\": \"2.0\",\r\n  \"method\": \"call\",\r\n  \"params\": {\r\n    \"sort\": \"name ASC\",\r\n    \"limit\": 0,\r\n    \"offset\": 0,\r\n    \"fields\": [\r\n      \"id\",\r\n      \"name\",\r\n      \"implied_ids\",\r\n      \"trans_implied_ids\",\r\n      \"category_id\",\r\n      \"code\"\r\n    ],\r\n    \"model\": \"res.groups\",\r\n    \"domain\": [\r\n      [\r\n        \"name\",\r\n        \"ilike\",\r\n        \"Demandeur\"\r\n      ],\r\n      [\r\n        \"full_name\",\r\n        \"ilike\",\r\n        \"Demandeur\"\r\n      ],\r\n            [\r\n        \"code\",\r\n        \"ilike\",\r\n        \"PART\"\r\n      ]\r\n    ],\r\n    \"session_id\": \"{{sessionId}}\",\r\n    \"context\": {\r\n      \"__ref\": \"compound_context\",\r\n      \"__contexts\": [\r\n        {\r\n          \"lang\": \"fr_FR\",\r\n          \"tz\": \"Europe/Paris\",\r\n          \"uid\": {{uid}}\r\n        },\r\n        {\r\n          \"bin_size\": true\r\n        }\r\n      ],\r\n      \"__eval_context\": null\r\n    }\r\n  }\r\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "b12233d5-09e8-502a-b51e-63d9735c678e",
      "name": "search_read users",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "postman.setEnvironmentVariable(\"userNumber\", jsonData.result.length);",
              "tests[\"Find users\"] = jsonData.result.ids.length != 1;"
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/search_read",
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/json, text/plain, */*",
            "description": ""
          },
          {
            "key": "Content-Type",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n\t\"jsonrpc\": \"2.0\",\n\t\"method\": \"call\",\n\t\"params\": {\n\t\t\"sort\": \"name ASC\",\n\t\t\"limit\": 20,\n\t\t\"offset\": 0,\n\t\t\"model\": \"res.users\",\n\t\t\"fields\": [\n\t\t\t\"achat_group\",\n\t\t\t\"actions\",\n\t\t\t\"active\",\n\t\t\t\"access_rights\",\n\t\t\t\"address_id\",\n\t\t\t\"city\",\n\t\t\t\"company_id\",\n\t\t\t\"complete_name\",\n\t\t\t\"contact_id\",\n\t\t\t\"context_lang\",\n\t\t\t\"context_tz\",\n\t\t\t\"cost\",\n\t\t\t\"current_group\",\n\t\t\t\"date\",\n\t\t\t\"email\",\n\t\t\t\"fluid_group\",\n\t\t\t\"function\",\n\t\t\t\"groups_id\",\n\t\t\t\"hex_color\",\n\t\t\t\"id\",\n\t\t\t\"is_assignable_to_task\",\n\t\t\t\"is_bookable_manager\",\n\t\t\t\"isDST\",\n\t\t\t\"isManager\",\n\t\t\t\"isResaManager\",\n\t\t\t\"lastname\",\n\t\t\t\"login\",\n\t\t\t\"managed_bookable_site_ids\",\n\t\t\t\"managed_bookable_equipment_ids\",\n\t\t\t\"managed_bookable_service_ids\",\n\t\t\t\"managed_bookables\",\n\t\t\t\"mobile\",\n\t\t\t\"name\",\n\t\t\t\"oauth_uid\",\n\t\t\t\"openresa_group\",\n\t\t\t\"patrimoine_group\",\n\t\t\t\"parcauto_group\",\n\t\t\t\"partner_id\",\n\t\t\t\"phone\",\n\t\t\t\"service_id\",\n\t\t\t\"service_ids\",\n\t\t\t\"service_names\",\n\t\t\t\"signature\",\n\t\t\t\"street\",\n\t\t\t\"tasks\",\n\t\t\t\"team_ids\",\n\t\t\t\"zip\",\n\t\t\t\"warehouse_ids\",\n\t\t\t\"openstc_employee_ref\"\n\t\t],\n\t\t\"session_id\": \"{{sessionId}}\",\n\t\t\"context\": {\n\t\t\t\"__ref\": \"compound_context\",\n\t\t\t\"__contexts\": [\n\t\t\t\t{\n\t\t\t\t\t\"lang\": \"fr_FR\",\n\t\t\t\t\t\"tz\": \"Europe/Paris\",\n\t\t\t\t\t\"uid\": {{uid}}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"bin_size\": true\n\t\t\t\t}\n\t\t\t],\n\t\t\t\"__eval_context\": null\n\t\t}\n\t}\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "bc2b25a6-96dc-682b-7a5d-e882bb863d1e",
      "name": "create user : Particuliers Commune - Demandeur externe",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "",
              "tests[\"Check error code\"] = jsonData.error.code ===200;",
              "tests[\"Check error type\"] = jsonData.error.data.type ===\"server_exception\";",
              ""
            ]
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "type": "text/javascript",
            "exec": [
              "postman.setEnvironmentVariable('userLogin','login'+postman.getEnvironmentVariable('userNumber'));",
              "postman.setEnvironmentVariable('userName','name'+postman.getEnvironmentVariable('userNumber'));"
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/create",
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          },
          {
            "key": "Accept",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"id\": \"r7\",\r\n  \"jsonrpc\": \"2.0\",\r\n  \"method\": \"call\",\r\n  \"params\": {\r\n    \"data\": {\r\n      \"context_tz\": \"Europe/Paris\",\r\n      \"hex_color\": \"#2B0652\",\r\n      \"service_id\": false,\r\n      \"service_ids\": [[6,  0,[]]],\r\n      \"is_assignable_to_task\": false,\r\n      \"is_bookable_manager\": false,\r\n      \"image\": false,\r\n      \"login\": \"{{userLogin}}\",\r\n      \"new_password\": \"user1Mdp\",\r\n      \"name\": \"{{userName}}\",\r\n      \"function\": \"userFonction\",\r\n      \"email\": \"user@domain.com\",\r\n      \"phone\": \"0240033021\",\r\n      \"mobile\": \"0660353212\",\r\n      \"street\": \"rue\",\r\n      \"zip\": \"44100\",\r\n      \"city\": \"nantes\",\r\n      \"partner_id\": {{resPartner.id}},\r\n      \"groups_id\": [[6,0,[{{resGroups.Demandeur.id}},  {{resGroups.DemandeurExterne.id}}]]]\r\n    },\r\n    \"model\": \"res.users\",\r\n    \"session_id\": \"{{sessionId}}\",\r\n    \"context\": {\r\n      \"__ref\": \"compound_context\",\r\n      \"__contexts\": [\r\n        {\r\n          \"lang\": \"fr_FR\",\r\n          \"tz\": \"Europe/Paris\",\r\n          \"uid\": \"{{uid}}\"\r\n        },\r\n        {\"bin_size\": true}\r\n      ],\r\n      \"__eval_context\": null\r\n    }\r\n  }\r\n}"
        },
        "description": "resGroups.id = Demandeur externe\n28 : Demandeur\nresPartner.id = Particuliers Commune"
      },
      "response": []
    },
    {
      "_postman_id": "87697b50-c4d8-ec3d-73ed-29e93451579d",
      "name": "createTask Demandeur",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "",
              "//You have no right to create when you are not in one of these groups: Create, User (from actions)",
              "tests[\"error code Check\"] = jsonData.error.code === 200;",
              "",
              ""
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/create",
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/json, text/plain, */*",
            "description": ""
          },
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n\t\"id\":\"r136\",\n    \"jsonrpc\":\"2.0\",\n    \"method\":\"call\",\n    \"params\":{\n        \"data\":{\n            \"project_id\":1823,\n            \"name\":\"ffff\",\n            \"service_id\":2,\n            \"planned_hours\":2,\n            \"category_id\":33,\n            \"user_id\":57,\n            \"date_start\":\"2017-04-28 06:30:00\",\n            \"date_end\":\"2017-04-28 08:30:00\"\n        },\n        \"model\":\"project.task\",\n        \"session_id\":\"{{sessionId}}\",\n        \"context\":{\n            \"__ref\":\"compound_context\",\n            \"__contexts\":[\n                {\n                    \"lang\":\"fr_FR\",\n                    \"tz\":\"Europe/Paris\",\n                    \"uid\":{{uid}}\n                },\n                {\n                    \"bin_size\":true\n                }\n            ],\n            \"__eval_context\":null\n        }\n    }\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "b7bb5005-872b-421f-cce7-f1d7714465ce",
      "name": "Create Compteur Demandeur externe",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "",
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "//You have no right to create when you are not in the group Gestionnaire.",
              "tests[\"error code Check\"] = jsonData.error.code === 200;",
              ""
            ]
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var text = \"\";",
              "var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";",
              "",
              "for( var i=0; i < 15; i++ )",
              "    text += possible.charAt(Math.floor(Math.random() * possible.length));",
              "    ",
              "postman.setEnvironmentVariable(\"ref\", text);",
              ""
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/create",
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/json, text/plain, */*",
            "description": ""
          },
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"jsonrpc\":\"2.0\",\n    \"method\":\"call\",\n    \"params\":{\n        \"data\":{\n            \"name\":\"Test Compteur1\",\n            \"categ_id\":22,\n            \"ref\":\"{{ref}}\",\n            \"category_id\":1\n        },\n        \"model\":\"opengst.fluids.meter\",\n        \"session_id\":\"{{sessionId}}\",\n        \"context\":{\n            \"__ref\":\"compound_context\",\n            \"__contexts\":[\n                {\n                    \"lang\":\"fr_FR\",\n                    \"tz\":\"Europe/Paris\",\n                    \"uid\":{{uid}}\n                },\n                {\n                    \"bin_size\":true\n                }\n            ],\n            \"__eval_context\":null\n        }\n    },\n    \"id\":\"r87\"\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "f0a39479-94bb-2eec-4389-5027ffe29184",
      "name": "Update Compteur DE",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "",
              "//You have no right to create when you are not in the group Gestionnaire.",
              "tests[\"error code Check\"] = jsonData.error.code === 200;"
            ]
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var text = \"\";",
              "var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";",
              "",
              "for( var i=0; i < 15; i++ )",
              "    text += possible.charAt(Math.floor(Math.random() * possible.length));",
              "    ",
              "postman.setEnvironmentVariable(\"ref1\", text);",
              ""
            ]
          }
        }
      ],
      "request": {
        "url": "https://gst-dev.atreal-ouest.fr/web/dataset/save",
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/json, text/plain, */*",
            "description": ""
          },
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"jsonrpc\":\"2.0\",\n    \"method\":\"call\",\n    \"params\":{\n        \"data\":{\n            \"categ_id\":22,\n            \"name\":\"Test Compteur\",\n            \"ref\":\"{{ref1}}\",\n            \"site_id\":false,\n            \"category_id\":3,\n            \"site_repartitions\":[\n\n            ]\n        },\n        \"model\":\"opengst.fluids.meter\",\n        \"id\":17,\n        \"session_id\":\"{{sessionId}}\",\n        \"context\":{\n            \"__ref\":\"compound_context\",\n            \"__contexts\":[\n                {\n                    \"lang\":\"fr_FR\",\n                    \"tz\":\"Europe/Paris\",\n                    \"uid\":{{uid}}\n                },\n                {\n                    \"bin_size\":true\n                }\n            ],\n            \"__eval_context\":null\n        }\n    },\n    \"id\":\"r94\"\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "52ef01b7-85a5-4375-1a1b-ec6c99b067b2",
      "name": "Search&Read Compteur DE",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "",
              "//You have no right to create when you are not in the group Gestionnaire/Superviseur.",
              "tests[\"error code Check\"] = jsonData.error.code === 200;"
            ]
          }
        }
      ],
      "request": {
        "url": "https://gst-dev.atreal-ouest.fr/web/dataset/search_read",
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/json, text/plain, */*",
            "description": ""
          },
          {
            "key": "Content-Type",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"jsonrpc\":\"2.0\",\n    \"method\":\"call\",\n    \"params\":{\n        \"limit\":20,\n        \"offset\":0,\n        \"model\":\"opengst.fluids.meter\",\n        \"fields\":[\n            \"id\",\n            \"actions\",\n            \"name\",\n            \"site_id\",\n            \"categ_id\",\n            \"category_id\",\n            \"ref\",\n            \"site_repartition_ids\"\n        ],\n        \"session_id\":\"{{sessionId}}\",\n        \"context\":{\n            \"__ref\":\"compound_context\",\n            \"__contexts\":[\n                {\n                    \"lang\":\"fr_FR\",\n                    \"tz\":\"Europe/Paris\",\n                    \"uid\":{{uid}}\n                },\n                {\n                    \"bin_size\":true\n                }\n            ],\n            \"__eval_context\":null\n        }\n    },\n    \"id\":\"r96\"\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "9e0705c0-aea5-2b66-2410-76f34f722647",
      "name": "Delete Compteur DE",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "",
              "//You have no right to create when you are not in the group Gestionnaire.",
              "tests[\"error code Check\"] = jsonData.error.code === 200;"
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/unlink",
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/json, text/plain, */*",
            "description": ""
          },
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"jsonrpc\":\"2.0\",\n    \"method\":\"call\",\n    \"params\":{\n        \"model\":\"opengst.fluids.meter\",\n        \"ids\":[\n            17\n        ],\n        \"session_id\":\"{{sessionId}}\",\n        \"context\":{\n            \"__ref\":\"compound_context\",\n            \"__contexts\":[\n                {\n                    \"lang\":\"fr_FR\",\n                    \"tz\":\"Europe/Paris\",\n                    \"uid\":{{uid}}\n                },\n                {\n                    \"bin_size\":true\n                }\n            ],\n            \"__eval_context\":null\n        }\n    },\n    \"id\":\"r97\"\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "d1042fff-9039-b0be-5e2a-1de91becb450",
      "name": "Create Site DE",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "",
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "//You have no right to create when you are not in the group Create Sites.",
              "tests[\"error code Check\"] = jsonData.error.code === 200;",
              ""
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/create",
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/json, text/plain, */*",
            "description": ""
          },
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"jsonrpc\":\"2.0\",\n    \"method\":\"call\",\n    \"params\":{\n        \"data\":{\n            \"osm_zoom\":false,\n            \"osm_type\":false,\n            \"osm_id\":false,\n            \"geometry\":false,\n            \"internal_booking\":false,\n            \"external_booking\":false,\n            \"block_booking\":false,\n            \"product_image\":false,\n            \"name\":\"CreateTest\",\n            \"type_id\":80\n        },\n        \"model\":\"openstc.site\",\n        \"session_id\":\"{{sessionId}}\",\n        \"context\":{\n            \"__ref\":\"compound_context\",\n            \"__contexts\":[\n                {\n                    \"lang\":\"fr_FR\",\n                    \"tz\":\"Europe/Paris\",\n                    \"uid\":{{uid}}\n                },\n                {\n                    \"bin_size\":true\n                }\n            ],\n            \"__eval_context\":null\n        }\n    },\n    \"id\":\"r156\"\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "754eb9ab-7865-eeb8-2f76-beee0f381159",
      "name": "Update Site DE",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "",
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "//You have no right to create when you are not in the group Modify Sites (from actions)",
              "tests[\"error code Check\"] = jsonData.error.code === 200;",
              ""
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/save",
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/json, text/plain, */*",
            "description": ""
          },
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"jsonrpc\":\"2.0\",\n    \"method\":\"call\",\n    \"params\":{\n        \"data\":{\n            \"code\":false,\n            \"type_id\":68,\n            \"color\":\"#390A10\",\n            \"surface\":0,\n            \"active\":true,\n            \"block_booking\":false,\n            \"osm_id\":false,\n            \"resa_user_manager_ids\":[\n                [\n                    6,\n                    0,\n                    [\n\n                    ]\n                ]\n            ],\n            \"max_bookable_qty\":0,\n            \"site_parent_id\":313,\n            \"width\":0,\n            \"resa_service_manager_ids\":[\n                [\n                    6,\n                    0,\n                    [\n\n                    ]\n                ]\n            ],\n            \"length\":0,\n            \"long\":0,\n            \"internal_bookable_notice\":0,\n            \"geo_point\":false,\n            \"partner_type_bookable_ids\":[\n                [\n                    6,\n                    0,\n                    [\n\n                    ]\n                ]\n            ],\n            \"service_bookable_ids\":[\n                [\n                    6,\n                    0,\n                    [\n\n                    ]\n                ]\n            ],\n            \"description_sale\":false,\n            \"osm_zoom\":false,\n            \"openresa_property_manager_id\":1,\n            \"lat\":0,\n            \"name\":\"1er Ã©tage test\",\n            \"service_ids\":[\n                [\n                    6,\n                    0,\n                    [\n\n                    ]\n                ]\n            ],\n            \"product_id\":648,\n            \"optional_product_ids\":[\n                [\n                    6,\n                    0,\n                    [\n\n                    ]\n                ]\n            ],\n            \"geometry\":false,\n            \"osm_type\":false,\n            \"internal_booking\":false,\n            \"external_booking\":false,\n            \"option_of_product_ids\":[\n                [\n                    6,\n                    0,\n                    [\n\n                    ]\n                ]\n            ],\n            \"external_bookable_notice\":0,\n            \"accommodation_capacity\":0,\n            \"product_image\":false\n        },\n        \"model\":\"openstc.site\",\n        \"id\":1151,\n        \"session_id\":\"{{sessionId}}\",\n        \"context\":{\n            \"__ref\":\"compound_context\",\n            \"__contexts\":[\n                {\n                    \"lang\":\"fr_FR\",\n                    \"tz\":\"Europe/Paris\",\n                    \"uid\":{{uid}}\n                },\n                {\n                    \"bin_size\":true\n                }\n            ],\n            \"__eval_context\":null\n        }\n    },\n    \"id\":\"r199\"\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "60705099-2530-d828-c1fb-d0a24f1dfdb0",
      "name": "Search Read Site DE",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "",
              "var jsonData = JSON.parse(responseBody);",
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "//Demandeur externe can only read the site",
              "tests[\"Check site exist\"] = jsonData.result.records.length > 0;",
              "",
              ""
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/search_read",
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/json, text/plain, */*",
            "description": ""
          },
          {
            "key": "//X-DevTools-Emulate-Network-Conditions-Client-Id",
            "value": "f55002dd-9cf3-4ebf-ba56-72718a383a86",
            "description": "",
            "disabled": true
          },
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n\t\"id\":\"r161\",\n    \"jsonrpc\":\"2.0\",\n    \"method\":\"call\",\n    \"params\":{\n        \"sort\":\"name ASC\",\n        \"limit\":20,\n        \"offset\":0,\n        \"model\":\"openstc.site\",\n        \"fields\":[\n            \"active\",\n            \"actions\",\n            \"attachment_count\",\n            \"block_booking\",\n            \"code\",\n            \"description_sale\",\n            \"external_booking\",\n            \"external_bookable_notice\",\n            \"internal_booking\",\n            \"internal_bookable_notice\",\n            \"lat\",\n            \"long\",\n            \"length\",\n            \"max_bookable_qty\",\n            \"name\",\n            \"openresa_property_manager_id\",\n            \"partner_type_bookable_ids\",\n            \"pricelist_id\",\n            \"product_id\",\n            \"service_ids\",\n            \"service_names\",\n            \"service_bookable_ids\",\n            \"site_parent_id\",\n            \"surface\",\n            \"type_id\",\n            \"width\",\n            \"color\",\n            \"resa_service_manager_ids\",\n            \"resa_user_manager_ids\",\n            \"optional_product_ids\",\n            \"option_of_product_ids\",\n            \"accomodation_capacity\",\n            \"phone\",\n            \"geometry\",\n            \"geo_point\",\n            \"osm_type\",\n            \"osm_id\",\n            \"osm_zoom\"\n        ],\n        \"session_id\":\"{{sessionId}}\",\n        \"context\":{\n            \"__ref\":\"compound_context\",\n            \"__contexts\":[\n                {\n                    \"lang\":\"fr_FR\",\n                    \"tz\":\"Europe/Paris\",\n                    \"uid\":{{uid}}\n                },\n                {\n                    \"bin_size\":true\n                }\n            ],\n            \"__eval_context\":null\n        }\n    }\n\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "3ef97e70-c011-b46e-35df-ce0b6f9ca664",
      "name": "get Site \"openstc.site\" DE",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "//tests[\"Site openSTC exist\"] = jsonData.result.length >0;",
              "",
              "//You have no right to create when you are not in one of these groups: User, Manager (from actions)",
              "tests[\"error code Check\"] = jsonData.error.code === 200;",
              ""
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/get",
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          },
          {
            "key": "Accept",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"id\": \"r3\",\r\n  \"jsonrpc\": \"2.0\",\r\n  \"method\": \"call\",\r\n  \"params\": {\r\n    \"model\": \"openstc.site\",\r\n    \"ids\": [\r\n      1\r\n    ],\r\n    \"session_id\": \"{{sessionId}}\",\r\n    \"context\": {\r\n      \"__ref\": \"compound_context\",\r\n      \"__contexts\": [\r\n        {\r\n          \"lang\": \"fr_FR\",\r\n          \"tz\": \"Europe/Paris\",\r\n          \"uid\": {{uid}}\r\n        },\r\n        {\r\n          \"bin_size\": true\r\n        }\r\n      ],\r\n      \"__eval_context\": null\r\n    }\r\n  }\r\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "5a867067-2c8f-43e1-40d7-6158a6aca728",
      "name": "Deactivate Site DE",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "",
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "//You have no right to create when you are not in the group Modify Sites (from actions)",
              "tests[\"error code Check\"] = jsonData.error.code === 200;",
              ""
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/save",
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/json, text/plain, */*",
            "description": ""
          },
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"jsonrpc\":\"2.0\",\n    \"method\":\"call\",\n    \"params\":{\n        \"data\":{\n            \"active\":false\n        },\n        \"model\":\"openstc.site\",\n        \"id\":1158,\n        \"session_id\":\"{{sessionId}}\",\n        \"context\":{\n            \"__ref\":\"compound_context\",\n            \"__contexts\":[\n                {\n                    \"lang\":\"fr_FR\",\n                    \"tz\":\"Europe/Paris\",\n                    \"uid\":{{uid}}\n                },\n                {\n                    \"bin_size\":true\n                }\n            ],\n            \"__eval_context\":null\n        }\n    },\n    \"id\":\"r238\"\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "e701f597-6251-8cca-9d2d-3ab189271617",
      "name": "Create equipement openstc.equipement copy",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "//For demandeur externe, who hasn't got right to create 'equipement'",
              "tests[\"Error Checked\"]=jsonData.error.code === 200;",
              "tests[\"Body matches access right\"] = jsonData.error.data.fault_code.has(\"Erreur d'accès\");"
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/create",
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          },
          {
            "key": "Accept-Language",
            "value": "fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"jsonrpc\":\"2.0\",\n    \"method\":\"call\",\n    \"params\":{\n        \"data\":{\n            \"qty_available\":1,\n            \"internal_booking\":false,\n            \"external_booking\":false,\n            \"block_booking\":false,\n            \"internal_use\":false,\n            \"product_image\":false,\n            \"categ_id\":14,\n            \"name\":\"Clio\",\n            \"new_qty\":1\n        },\n        \"model\":\"openstc.equipment\",\n        \"session_id\":\"{{sessionId}}\",\n        \"context\":{\n            \"__ref\":\"compound_context\",\n            \"__contexts\":[\n                {\n                    \"lang\":\"fr_FR\",\n                    \"tz\":\"Europe/Paris\",\n                    \"uid\":{{uid}}\n                },\n                {\n                    \"bin_size\":true\n                }\n            ],\n            \"__eval_context\":null\n        }\n    },\n    \"id\":\"r51\"\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "0804a268-cf8b-7a63-a95c-6e1b98f87b9d",
      "name": "get res.company settings copy",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "tests[\"Status code is 200\"] = responseCode.code === 200;"
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/get",
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          },
          {
            "key": "Accept",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"id\": \"r2\",\r\n  \"jsonrpc\": \"2.0\",\r\n  \"method\": \"call\",\r\n  \"params\": {\r\n    \"model\": \"res.company\",\r\n    \"ids\": [],\r\n    \"fields\": [\r\n      \"validate_request_window_advanced_mode\",\r\n      \"add_task_window_advanced_mode\",\r\n      \"add_intervention_window_create_task\",\r\n      \"intervention_window_synchronize_status\",\r\n      \"task_default_hours\",\r\n      \"task_default_minutes\"\r\n    ],\r\n    \"session_id\": \"{{sessionId}}\"\r\n  }\r\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "82f6e09f-adec-9a26-6f87-d90af7e8f295",
      "name": "create Carburant \"opengst.automobile.fuel\" copy",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "//For demandeur externe, who hasn't got right to create 'Carburant'",
              "tests[\"Error Checked\"]=jsonData.error.code === 200;",
              "tests[\"Body matches access right\"] = jsonData.error.data.fault_code.has(\"Erreur d'accès\");"
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/create",
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          },
          {
            "key": "Accept",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"id\": \"r7\",\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"call\",\n  \"params\": {\n    \"data\": {\n    \"name\": \"Creation Carburant\"\n  },\n  \"model\": \"opengst.automobile.fuel\",\n    \"session_id\": \"{{sessionId}}\",\n    \"context\": {\n      \"__ref\": \"compound_context\",\n      \"__contexts\": [\n        {\n          \"lang\": \"fr_FR\",\n          \"tz\": \"Europe/Paris\",\n          \"uid\": \"{{uid}}\"\n        },\n        {\"bin_size\": true}\n      ],\n      \"__eval_context\": null\n    }\n  }\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "f9d19cd7-7e28-a81e-5acd-67e16423e4cb",
      "name": "create Categorie d'equipement \"product.category\" copy",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "//For demandeur externe, who hasn't got right to create 'Categorie'",
              "tests[\"Error Checked\"]=jsonData.error.code === 200;",
              "tests[\"Body matches access right\"] = jsonData.error.data.fault_code.has(\"Erreur d'accès\");"
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/create",
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          },
          {
            "key": "Accept",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"id\": \"r7\",\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"call\",\n  \"params\": {\n  \"data\": {\n      \"is_vehicle\": false,\n      \"is_equipment\": true,\n      \"is_key\": false,\n      \"name\": \"Creation Categorie Equipement\",\n      \"parent_id\": 14\n  },\n  \"model\": \"product.category\",\n    \"session_id\": \"{{sessionId}}\",\n    \"context\": {\n      \"__ref\": \"compound_context\",\n      \"__contexts\": [\n        {\n          \"lang\": \"fr_FR\",\n          \"tz\": \"Europe/Paris\",\n          \"uid\": \"{{uid}}\"\n        },\n        {\"bin_size\": true}\n      ],\n      \"__eval_context\": null\n    }\n  }\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "a4fcddbb-e558-db5d-2f12-644ad3bcd7c7",
      "name": "save Organisation avec nouveau sites \"openstc.site\" copy",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "//For demandeur externe, who hasn't got right to save 'Organisation'",
              "tests[\"Error Checked\"]=jsonData.error.code === 200;",
              "tests[\"Body matches access right\"] = jsonData.error.data.fault_code.has(\"Erreur d'accès\");"
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/save",
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          },
          {
            "key": "Accept",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"id\": \"r7\",\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"call\",\n  \"params\": {\n     \"data\": {\n    \"technical_service_id\": 2,\n    \"name\": \"ACCUEIL\",\n    \"type_id\": 7,\n    \"technical_site_ids\": [[6, 0, [1151, 1058]]],\n    \"technical_service_ids\": [[6, 0, []]],\n    \"technical_site_id\": false\n  },\n    \"model\": \"res.partner\",\n    \"id\": 12,\n    \"session_id\": \"{{sessionId}}\",\n    \"context\": {\n      \"__ref\": \"compound_context\",\n      \"__contexts\": [\n        {\n          \"lang\": \"fr_FR\",\n          \"tz\": \"Europe/Paris\",\n          \"uid\": \"{{uid}}\"\n        },\n        {\"bin_size\": true}\n      ],\n      \"__eval_context\": null\n    }\n  }\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "4c7f43f7-0260-a97a-6eeb-d4e12bba6c44",
      "name": "get Organisation \"openstc.site\" copy",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "",
              "tests[\"Return a result when get Organization\"] = jsonData.result.length > 0;",
              "",
              "// Demandeur externe has no action exist",
              "tests[\"Check action doesn't exist\"]=jsonData.result[0].actions.length === 0;"
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/get",
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          },
          {
            "key": "Accept",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"id\": \"r7\",\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"call\",\n  \"params\": {\n     \"fields\":[\n        \"active\",\n        \"actions\",\n        \"attachment_count\",\n        \"block_booking\",\n        \"code\",\n        \"description_sale\",\n        \"external_booking\",\n        \"external_bookable_notice\",\n        \"internal_booking\",\n        \"internal_bookable_notice\",\n        \"lat\",\n        \"long\",\n        \"length\",\n        \"max_bookable_qty\",\n        \"name\",\n        \"openresa_property_manager_id\",\n        \"partner_type_bookable_ids\",\n        \"pricelist_id\",\n        \"product_id\",\n        \"service_ids\",\n        \"service_names\",\n        \"service_bookable_ids\",\n        \"site_parent_id\",\n        \"surface\",\n        \"type_id\",\n        \"width\",\n        \"color\",\n        \"resa_service_manager_ids\",\n        \"resa_user_manager_ids\",\n        \"optional_product_ids\",\n        \"option_of_product_ids\",\n        \"accomodation_capacity\",\n        \"phone\",\n        \"geometry\",\n        \"geo_point\",\n        \"osm_type\",\n        \"osm_id\",\n        \"osm_zoom\"\n     ],\n    \"ids\": [12],\n    \"model\": \"openstc.site\",\n    \"session_id\": \"{{sessionId}}\",\n    \"context\": {\n      \"__ref\": \"compound_context\",\n      \"__contexts\": [\n        {\n          \"lang\": \"fr_FR\",\n          \"tz\": \"Europe/Paris\",\n          \"uid\": \"{{uid}}\"\n        },\n        {\"bin_size\": true}\n      ],\n      \"__eval_context\": null\n    }\n  }\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "3b186fa9-a456-7fe5-d3f7-947dcf4ecc8e",
      "name": "search_read Site \"openstc.site\" copy",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "//For demandeur externe, who hasn't got right to read site \"Openstc.site\"",
              "tests[\"Error Checked\"]=jsonData.error.code === 200;",
              "tests[\"Body matches access right\"] = jsonData.error.data.fault_code.has(\"Erreur d'accès\");"
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/search_read",
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          },
          {
            "key": "Accept",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"id\": \"r5\",\r\n  \"jsonrpc\": \"2.0\",\r\n  \"method\": \"call\",\r\n  \"params\": {\r\n    \"sort\": \"id DESC\",\r\n    \"limit\": 10,\r\n    \"offset\": 0,\r\n    \"model\": \"openstc.site\",\r\n    \"session_id\": \"{{sessionId}}\",\r\n    \"context\": {\r\n      \"__ref\": \"compound_context\",\r\n      \"__contexts\": [\r\n        {\r\n          \"lang\": \"fr_FR\",\r\n          \"tz\": \"Europe/Paris\",\r\n          \"uid\": \"{{uid}}\"\r\n        },\r\n        {\r\n          \"bin_size\": true\r\n        }\r\n      ],\r\n      \"__eval_context\": null\r\n    }\r\n  }\r\n}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "21b87183-2f99-8ac9-9c89-5d5486b6d3f5",
      "name": "create Modele de véhicule \"opengst.automobile.model\" copy",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "//For demandeur externe, who hasn't got right to create 'Modele de vehicule'",
              "tests[\"Error Checked\"]=jsonData.error.code === 200;",
              "tests[\"Body matches access right\"] = jsonData.error.data.fault_code.has(\"Erreur d'accès\");"
            ]
          }
        }
      ],
      "request": {
        "url": "{{server}}/web/dataset/create",
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=UTF-8",
            "description": ""
          },
          {
            "key": "Accept",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"id\": \"r7\",\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"call\",\n  \"params\": {\n    \"data\": {\n      \"name\": \"Creation Modele\",\n      \"brand_id\": 229,\n      \"type_id\": false,\n      \"width\":1,\n            \"height\":2,\n            \"length\":3,\n            \"weight_ptv\":4,\n            \"weight_ptac\":5,\n            \"weight_ptr\":6\n    },\n  \"model\": \"opengst.automobile.brand.model\",\n    \"session_id\": \"{{sessionId}}\",\n    \"context\": {\n      \"__ref\": \"compound_context\",\n      \"__contexts\": [\n        {\n          \"lang\": \"fr_FR\",\n          \"tz\": \"Europe/Paris\",\n          \"uid\": \"{{uid}}\"\n        },\n        {\"bin_size\": true}\n      ],\n      \"__eval_context\": null\n    }\n  }\n}"
        },
        "description": ""
      },
      "response": []
    }
  ]
}