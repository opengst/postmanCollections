{
  "info": {
    "name": "Mobile - Used by Jenkins - Public Visibility",
    "_postman_id": "4f1a88c8-b0f3-da27-0f9e-9a544c47d615",
    "description": "",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "_postman_id": "6d58a872-59bc-c272-0846-359fa0d44066",
      "name": "Agent",
      "description": "",
      "item": [
        {
          "_postman_id": "969ffd14-5234-189f-a9d8-d3b6cf97b141",
          "name": "Init VAR ENV - STAGING MOBILE copy",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "postman.clearEnvironmentVariables();",
                  "",
                  "postman.setEnvironmentVariable(\"server\", \"http://staging.opengst.fr/\");",
                  "postman.setEnvironmentVariable(\"db\", \"mobile\");",
                  "",
                  "postman.setEnvironmentVariable(\"login_admin\", \"admin\");",
                  "postman.setEnvironmentVariable(\"password_admin\", \"FMAlV00516562798\");",
                  "",
                  "postman.setEnvironmentVariable(\"login_accountNotConnected\", \"MainAccessUserForCitizenMobile\");",
                  "postman.setEnvironmentVariable(\"password_accountNotConnected\", \"my8Vk4eThcWz9QdjfSXvCBw3K\");",
                  "",
                  "postman.setEnvironmentVariable(\"login_agent\", \"fblanchard\");",
                  "postman.setEnvironmentVariable(\"password_agent\", \"12345678\");"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://www.google.com",
            "description": null
          },
          "response": []
        },
        {
          "_postman_id": "7869aca4-8e6b-3944-b816-e13b327cfda3",
          "name": "Authenticate copy",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"sessionId\", jsonData.result.session_id);",
                  "postman.setEnvironmentVariable(\"uid\", jsonData.result.uid);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json;charset=UTF-8"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"id\": \"r1\",\r\n  \"jsonrpc\": \"2.0\",\r\n  \"method\": \"call\",\r\n  \"params\": {\r\n    \"login\": \"{{login_agent}}\",\r\n    \"password\": \"{{password_agent}}\",\r\n    \"db\": \"{{db}}\"\r\n  }\r\n}"
            },
            "url": "{{server}}/web/session/authenticate",
            "description": null
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "60b9bbc9-4795-5ca0-6331-61db1726a990",
      "name": "Mobile AppyConnect.City",
      "description": "",
      "item": [
        {
          "_postman_id": "cbf2ee17-fe56-bb35-337a-476102cdb08c",
          "name": "BEGIN RUN HERE",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "tests[\"BEGIN\"] = 1 === 1;",
                  "postman.clearEnvironmentVariable(\"lastStepScenarioCitoyen\")",
                  "postman.setNextRequest(\"000 - Global Scenario\");"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://www.google.com",
            "description": null
          },
          "response": []
        },
        {
          "_postman_id": "c689f950-3910-8c76-0652-27c19e9a915f",
          "name": "000 - Global Scenario",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "tests[\"Switch..\"] = 1 === 1;",
                  "",
                  "switch(postman.getEnvironmentVariable(\"lastStepScenarioCitoyen\")) {",
                  "    ",
                  "    case undefined:",
                  "        tests[\"Utils - Clear Environnement Variables\"] = 1 === 1;",
                  "        postman.setNextRequest(\"Utils - Clear Environnement Variables\");",
                  "        break;",
                  "        ",
                  "    case \"Clear Environnement Variables\":",
                  "        tests[\"Authenticate with globalAccount\"] = 1 === 1;",
                  "        postman.setNextRequest(\"Authenticate with globalAccount\");",
                  "        break;",
                  "        ",
                  "    case \"Authenticate with globalAccount\":",
                  "        tests[\"Get CategorieOrganisations with code PARTICULIER\"] = 1 === 1;",
                  "        postman.setNextRequest(\"Get CategorieOrganisations with code PARTICULIER\");",
                  "        break;        ",
                  "        ",
                  "    case \"Get CategorieOrganisations with code PARTICULIER\":",
                  "        tests[\"Get Organisation with last CategorieOrganisation\"] = 1 === 1;",
                  "        postman.setNextRequest(\"Get Organisation with last CategorieOrganisation\");",
                  "        break;              ",
                  "        ",
                  "    case \"Get Organisation with last CategorieOrganisation\":",
                  "        tests[\"Get GroupId for Demandeur\"] = 1 === 1;",
                  "        postman.setNextRequest(\"Get GroupId for Demandeur\");",
                  "        break;        ",
                  "        ",
                  "    case \"Get GroupId for Demandeur\":",
                  "        tests[\"Create User on Particuliers Commune\"] = 1 === 1;",
                  "        postman.setNextRequest(\"Create User on Particuliers Commune\");",
                  "        break;        ",
                  "        ",
                  "    case \"Create User on Particuliers Commune\":",
                  "        tests[\"Authenticate with userAccount\"] = 1 === 1;",
                  "        postman.setNextRequest(\"Authenticate with userAccount\");",
                  "        break;              ",
                  "        ",
                  "    case \"Authenticate with userAccount\":",
                  "        tests[\"Get session info\"] = 1 === 1;",
                  "        postman.setNextRequest(\"Get session info\");",
                  "        break;        ",
                  "        ",
                  "    case \"Get session info\":",
                  "        tests[\"Get user informations\"] = 1 === 1;",
                  "        postman.setNextRequest(\"Get user informations\");",
                  "        break;        ",
                  "        ",
                  "    case \"Get user informations\":",
                  "        tests[\"Get contact informations\"] = 1 === 1;",
                  "        postman.setNextRequest(\"Get contact informations\");",
                  "        break;        ",
                  "        ",
                  "    case \"Get contact informations\":",
                  "        tests[\"Search_read All Category\"] = 1 === 1;",
                  "        postman.setNextRequest(\"Search_read All Category\");",
                  "        break;              ",
                  "        ",
                  "    case \"Search_read All Category\":",
                  "        tests[\"Search_read All Demandes d'intervention\"] = 1 === 1;",
                  "        postman.setNextRequest(\"Search_read All Demandes d'intervention\");",
                  "        break;        ",
                  "        ",
                  "    case \"Search_read All Demandes d'intervention\":",
                  "        tests[\"Create Demande intervention\"] = 1 === 1;",
                  "        postman.setNextRequest(\"Create Demande intervention\");",
                  "        break;        ",
                  "        ",
                  "    case \"Create Demande intervention\":",
                  "        tests[\"END\"] = 1 === 1;",
                  "        postman.setNextRequest(null);",
                  "        break;     ",
                  "        ",
                  "    default:",
                  "        tests[\"ERROR ON lastStepScenarioCitoyen\"] = 1 === 0;",
                  "        postman.setNextRequest(null);",
                  "}",
                  ""
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://www.google.com",
            "description": null
          },
          "response": []
        }
      ]
    }
  ]
}